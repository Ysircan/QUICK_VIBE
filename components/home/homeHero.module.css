.hero{
  /* local theme (so it works even without global vars) */
  --ink:#111;
  --paper:#F3F1EA;
  --paper2:#EFE9DF;

  --stroke: 4px;
  --shadow-hard: 10px 10px 0 var(--ink);

  --yellow:#ffe279;

  /* calm accents */
  --violet:#7b2cff;
  --coral:#ff746a;
  --sky:#38bdf8;
  --teal:#14b8a6;
  --amber:#fbbf24;

  /* calm washes */
  --c1:#E9E3FF;
  --c2:#E5F6FF;
  --c3:#E7FFF7;
  --c4:#FFE8EE;

  /* hero frame */
  border: var(--stroke) solid var(--ink);
  border-radius: 24px;
  box-shadow: var(--shadow-hard);
  background: linear-gradient(180deg, var(--paper2), var(--paper));
  padding: 18px;

  /* ✅ lock typography + prevent washed text */
  color: var(--ink);
  font-family: var(--font-geist-sans), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "PingFang SC","Microsoft YaHei", sans-serif;

  /* ✅ prevent parent filters/opacities from washing this section */
  opacity: 1;
  filter: none;
  mix-blend-mode: normal;
}

.heroGrid{
  display:grid;
  grid-template-columns: 270px 1fr 270px;
  gap: 16px;
  align-items: stretch;
  min-height: 360px;
}

/* ===== Rails ===== */
.rail{
  border: var(--stroke) solid var(--ink);
  border-radius: 20px;
  background: rgba(255,255,255,.42);
  box-shadow: 8px 8px 0 var(--ink);
  overflow: hidden;
  position: relative;
}

.rail::before{
  content:"";
  position:absolute; inset:0;
  background:
    radial-gradient(80% 60% at 50% 20%, rgba(0,0,0,.06), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.35), rgba(255,255,255,0));
  pointer-events:none;
  z-index:2;
}

.lane{
  position:absolute; inset: 10px;
  border-radius: 14px;
  overflow:hidden;
  z-index:1;
}

.laneInner{
  display:flex;
  flex-direction:column;
  gap: 12px;
  padding: 6px;
  will-change: transform;
}

/* slower & close speeds (less dizzy) */
.up{ animation: scrollUp 72s linear infinite; }
.down{ animation: scrollDown 78s linear infinite; }

/* pause on hover/focus */
.hero:hover .laneInner{ animation-play-state: paused; }
.rail:focus-within .laneInner{ animation-play-state: paused; }

@keyframes scrollUp{
  0%{ transform: translateY(0); }
  100%{ transform: translateY(-50%); }
}
@keyframes scrollDown{
  0%{ transform: translateY(-50%); }
  100%{ transform: translateY(0); }
}

.railFade{
  position:absolute; inset:0;
  background:
    linear-gradient(180deg,
      rgba(243,241,234,.95),
      rgba(243,241,234,0) 18%,
      rgba(243,241,234,0) 82%,
      rgba(243,241,234,.95)
    );
  pointer-events:none;
  z-index:3;
}

/* ===== mini cards ===== */
.mini{
  border: 3px solid var(--ink);
  border-radius: 16px;
  box-shadow: 7px 7px 0 var(--ink);
  background: rgba(255,255,255,.88);
  padding: 12px 12px 10px;
  color: var(--ink);
}

.wash1{ background: color-mix(in srgb, var(--c1) 55%, white); }
.wash2{ background: color-mix(in srgb, var(--c2) 55%, white); }
.wash3{ background: color-mix(in srgb, var(--c3) 55%, white); }
.wash4{ background: color-mix(in srgb, var(--c4) 55%, white); }

.miniTop{
  display:flex; align-items:center; justify-content:space-between;
  gap:10px;
  margin-bottom: 8px;
}

.miniCap{
  display:inline-flex; align-items:center;
  height: 26px;
  padding: 0 10px;
  border: 2px solid var(--ink);
  border-radius: 999px;
  background: rgba(255,255,255,.88);
  font-weight: 900;
  letter-spacing: .06em;
  font-size: 11px;
  user-select:none;
}

.miniTitle{
  font-weight: 900;
  letter-spacing: .01em;
  margin: 0 0 4px;
  font-size: 14px;
  color: var(--ink);
}

.miniSub{
  margin:0;
  font-size: 12px;
  color: rgba(17,17,17,.78);
  line-height: 1.35;
}

.tagRow{
  margin-top: 10px;
  display:flex;
  flex-wrap:wrap;
  gap: 6px;
}

.tag{
  display:inline-flex;
  align-items:center;
  gap:6px;
  height: 26px;
  padding: 0 9px;
  border: 2px solid var(--ink);
  border-radius: 999px;
  background: rgba(255,255,255,.88);
  font-weight: 850;
  font-size: 11px;
  letter-spacing: .03em;
  color: rgba(17,17,17,.92);
}

.dot{
  width: 8px; height: 8px;
  border: 2px solid var(--ink);
  border-radius: 999px;
  background: var(--accent, var(--yellow));
  box-shadow: 0 0 0 3px rgba(255,255,255,.55);
}

/* ===== Center ===== */
.center{
  display:grid;
  place-items:center;
}

.centerShell{
  width:100%;
  max-width: 720px;
  border: var(--stroke) solid var(--ink);
  border-radius: 22px;
  box-shadow: var(--shadow-hard);
  background: rgba(255,255,255,.90);
  padding: 18px 18px 16px;
  color: var(--ink);
}

.pillRow{
  display:flex;
  gap: 10px;
  align-items:center;
  margin-bottom: 10px;
  flex-wrap:wrap;
}

.cap{
  display:inline-flex;
  align-items:center;
  height: 34px;
  padding: 0 12px;
  border: var(--stroke) solid var(--ink);
  border-radius: 999px;
  box-shadow: 6px 6px 0 var(--ink);
  background: var(--yellow);
  font-weight: 900;
  letter-spacing: .04em;
  font-size: 12px;
  white-space: nowrap;
  color: var(--ink);
}

.capGhost{
  display:inline-flex;
  align-items:center;
  height: 34px;
  padding: 0 12px;
  border: var(--stroke) solid var(--ink);
  border-radius: 999px;
  box-shadow: 6px 6px 0 var(--ink);
  background: rgba(255,255,255,.92);
  font-weight: 900;
  letter-spacing: .04em;
  font-size: 12px;
  white-space: nowrap;
  color: rgba(17,17,17,.82);
}

.flipBtn{
  margin-left:auto;
  height: 34px;
  padding: 0 12px;
  border: 3px solid var(--ink);
  border-radius: 999px;
  background: rgba(255,255,255,.92);
  box-shadow: 6px 6px 0 var(--ink);
  font-weight: 900;
  letter-spacing: .02em;
  cursor:pointer;
  color: var(--ink);
}
.flipBtn:hover{ transform: translate(-1px,-1px); box-shadow: 7px 7px 0 var(--ink); }
.flipBtn:active{ transform: translate(2px,2px); box-shadow: 4px 4px 0 var(--ink); }

/* flip */
.flipWrap{ perspective: 1200px; }

.flipInner{
  position:relative;
  transform-style: preserve-3d;
  transition: transform .8s cubic-bezier(.2,.8,.2,1);
  min-height: 230px;
}

.isFlipped{ transform: rotateY(180deg); }

.face{
  position:absolute; inset:0;
  backface-visibility: hidden;
  color: var(--ink);
}

.front{ transform: rotateY(0deg); }
.back{ transform: rotateY(180deg); }

.h1{
  margin: 0 0 8px;
  font-size: 46px;
  line-height: 1.02;
  letter-spacing: -0.03em;
  font-weight: 900;     /* ✅ avoid 950 rendering weird */
  color: var(--ink);    /* ✅ no grey */
}

.sub{
  margin: 0 0 14px;
  font-size: 16px;
  line-height: 1.4;
  color: rgba(17,17,17,.82); /* ✅ explicit instead of opacity */
}

.ctaRow{
  display:flex;
  gap: 12px;
  align-items:center;
  flex-wrap:wrap;
  margin-bottom: 12px;
}

.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height: 44px;
  padding: 0 16px;
  border: var(--stroke) solid var(--ink);
  border-radius: 999px;
  box-shadow: 8px 8px 0 var(--ink);
  background: rgba(255,255,255,.92);
  color: var(--ink);
  text-decoration:none;
  font-weight: 900;
  letter-spacing: .02em;
  user-select:none;
}
.btnPrimary{ background: var(--yellow); }
.btn:hover{ transform: translate(-1px,-1px); box-shadow: 9px 9px 0 var(--ink); }
.btn:active{ transform: translate(2px,2px); box-shadow: 6px 6px 0 var(--ink); }

.microRow{
  display:flex;
  gap: 8px;
  flex-wrap:wrap;
}

.micro{
  display:inline-flex;
  align-items:center;
  height: 28px;
  padding: 0 10px;
  border: 2px solid var(--ink);
  border-radius: 999px;
  background: rgba(255,255,255,.88);
  font-weight: 850;
  font-size: 12px;
  user-select:none;
  color: rgba(17,17,17,.88);
}

/* back face content */
.backTop{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap: 10px;
  margin-bottom: 12px;
}

.backTitle{
  font-weight: 900;
  font-size: 18px;
  letter-spacing: .01em;
  color: var(--ink);
}

.backHint{
  font-size: 12px;
  font-weight: 850;
  color: rgba(17,17,17,.70);
}

.backGrid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-bottom: 12px;
}

.backBlock{
  border: 3px solid var(--ink);
  border-radius: 16px;
  background: rgba(255,255,255,.86);
  box-shadow: 7px 7px 0 var(--ink);
  padding: 10px;
  color: var(--ink);
}

.backCap{
  display:inline-flex;
  height: 24px;
  padding: 0 10px;
  border: 2px solid var(--ink);
  border-radius: 999px;
  background: rgba(255,255,255,.92);
  font-weight: 900;
  letter-spacing: .04em;
  font-size: 11px;
  margin-bottom: 8px;
  color: var(--ink);
}

.backLine{
  font-size: 12px;
  line-height: 1.3;
  font-weight: 750;
  color: rgba(17,17,17,.82);
}

.backFooter{
  display:flex;
  gap: 8px;
  flex-wrap:wrap;
}

/* ===== Reduced motion ===== */
@media (prefers-reduced-motion: reduce){
  .laneInner{ animation: none !important; }
  .flipInner{ transition: none !important; }
}

/* ===== Responsive ===== */
@media (max-width: 1100px){
  .heroGrid{ grid-template-columns: 240px 1fr 240px; }
  .h1{ font-size: 42px; }
}

/* ===== Tablet & below: hero must grow with content ===== */
@media (max-width: 900px){
  /* 关键：解除固定高度 + 解除 absolute，让内容撑开 hero */
  .hero{
    height: auto !important;
  }
  .heroGrid{
    position: relative !important;
    inset: auto !important;
    grid-template-columns: 1fr;
    gap: 14px;
    padding: 14px;
    min-height: 0;
  }

  /* rails 变成氛围条 */
  .rail{ height: 190px; }

  .centerShell{ max-width: 720px; }

  .h1{ font-size: 36px; line-height: 1.05; }

  .ctaRow{ gap: 10px; }
  .btn{ height: 44px; padding: 0 14px; }

  /* 确保 flip 按钮在最上层可点 */
  .pillRow{ position: relative; z-index: 3; }
  .flipBtn{
    margin-left: auto;
    position: relative;
    z-index: 4;
  }

  /* 动画更慢一点 */
  .up{ animation-duration: 92s; }
  .down{ animation-duration: 98s; }
}

/* ===== Phone: center-only + disable 3D flip (height auto) ===== */
@media (max-width: 720px){
  .hero{
    --stroke: 3px;
    --shadow-hard: 6px 6px 0 var(--ink);
    border-radius: 18px;
    padding: 12px;
  }

  .rail{ display: none; }

  .centerShell{
    padding: 14px;
    border-radius: 18px;
  }

  .h1{ font-size: 30px; line-height: 1.05; }
  .sub{ font-size: 14px; }

  .ctaRow{
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
  }
  .btn{
    width: 100%;
    justify-content: center;
  }

  .pillRow{ flex-wrap: wrap; gap: 10px; }
  .backGrid{ grid-template-columns: 1fr; }

  /* 关键：禁用 3D flip，改为 display 切换，让容器高度跟内容走 */
  .flipWrap{ perspective: none !important; }

  .flipInner{
    transform: none !important;
    transform-style: flat !important;
    transition: none !important;
    min-height: 0 !important;
  }

  .face{
    position: static !important;
    inset: auto !important;
    transform: none !important;
    backface-visibility: visible !important;
  }

  /* 默认显示 front */
  .front{ display: block; }
  .back{ display: none; }

  /* flip 后显示 back（你的 isFlipped 是加在 flipInner 上的） */
  .isFlipped .front{ display: none; }
  .isFlipped .back{ display: block; }
}

@media (max-width: 520px){
  .hero{ padding: 12px; }
  .centerShell{ padding: 12px; }

  .h1{ font-size: 28px; }
  .sub{ font-size: 14px; }

  .miniTitle{ font-size: 13px; }
  .miniSub{ font-size: 11px; }
}
