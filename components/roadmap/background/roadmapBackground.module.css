/* components/roadmap/background/roadmapBackground.module.css */

/* =========================
   Roadmap Background Scope
   ========================= */
.bg{
  /* scoped vars (不污染全局) */
  --ink:#111;
  --paper:#F3F1EA;

  --coral:#ff746a;
  --violet:#8b5cf6;
  --amber:#f59e0b;
  --sky:#38bdf8;
  --teal:#14b8a6;

  --radius: 18px;

  /* navbar 下方开始画背景（由 TSX 传入） */
  --roadmap-top: 92px;

  position: relative;
  min-height: 100vh;

  /* ✅ 内容可交互 */
  pointer-events: auto;
  color: var(--ink);
}

/* 轻微暗角/光斑（背景层） */
.bg::before{
  content:"";
  position: fixed;
  left:0; right:0;
  top: var(--roadmap-top);
  bottom:0;
  z-index: 0;
  pointer-events: none;

  background:
    radial-gradient(1200px 520px at 50% 10%, rgba(0,0,0,.08), transparent 60%),
    radial-gradient(900px 600px at 20% 90%, rgba(0,0,0,.06), transparent 60%),
    radial-gradient(900px 600px at 80% 90%, rgba(0,0,0,.06), transparent 60%);
  mix-blend-mode: multiply;
  opacity: .55;
}

/* ✅ 背景 rails：固定在屏幕上，永远不吃点击 */
.bgGrid{
  position: fixed;
  left:0; right:0;
  top: var(--roadmap-top);
  bottom:0;

  z-index: 0;
  pointer-events: none;

  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 18px;

  padding: 24px;
  max-width: 1320px;
  margin: 0 auto;

  opacity: .55;
  filter: saturate(.98);
}

/* ✅ 内容层：居中、往下挪、压在背景上 */
.stage{
  position: relative;
  z-index: 2;
  pointer-events: auto;

  display: flex;
  justify-content: center;

  /* 往下挪 + 左右安全边距 */
  padding: calc(var(--roadmap-top) + 22px) 18px 44px;
}

/* =========================
   Rail
   ========================= */
.rail{
  position: relative;
  overflow: hidden;
  border: 2px solid var(--ink);
  border-radius: var(--radius);
  background: rgba(255,255,255,.28);
  box-shadow: 0 18px 60px rgba(0,0,0,.10);
  backdrop-filter: blur(6px);
}

/* 顶/底渐隐 */
.rail::before,
.rail::after{
  content:"";
  position:absolute;
  left:0; right:0;
  height: 80px;
  z-index:2;
  pointer-events:none;
}

.rail::before{
  top:0;
  background: linear-gradient(to bottom, var(--paper) 0%, rgba(243,241,234,0) 100%);
}

.rail::after{
  bottom:0;
  background: linear-gradient(to top, var(--paper) 0%, rgba(243,241,234,0) 100%);
}

.railInner{
  position:absolute;
  inset: 10px;
  border-radius: calc(var(--radius) - 8px);
  overflow:hidden;
}

/* =========================
   Track (animation)
   ========================= */
.track{
  display:flex;
  flex-direction:column;
  gap: 12px;
  padding: 10px;
  will-change: transform;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
  opacity: .9;
  transform: translateZ(0);

  /* 默认值（最终速度由 RoadmapRail.tsx inline 决定） */
  animation-duration: 180s;
}

/* 方向动画 */
.up .track{ animation-name: railUp; }
.down .track{ animation-name: railDown; }

@keyframes railUp{
  from{ transform: translateY(0); }
  to  { transform: translateY(-50%); }
}

@keyframes railDown{
  from{ transform: translateY(-50%); }
  to  { transform: translateY(0); }
}

/* =========================
   Mini Cards
   ========================= */
.mini{
  border: 2px solid var(--ink);
  border-radius: 16px;
  background: rgba(255,255,255,.62);
  box-shadow: 0 10px 24px rgba(0,0,0,.08);
  padding: 10px 10px 9px;
  color: var(--ink);
}

.wash1{ background: linear-gradient(135deg, rgba(255,116,106,.14), rgba(255,255,255,.62)); }
.wash2{ background: linear-gradient(135deg, rgba(139,92,246,.12), rgba(255,255,255,.62)); }
.wash3{ background: linear-gradient(135deg, rgba(56,189,248,.12), rgba(255,255,255,.62)); }
.wash4{ background: linear-gradient(135deg, rgba(20,184,166,.12), rgba(255,255,255,.62)); }

.cap{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  height: 26px;
  padding: 0 10px;
  border-radius: 999px;
  border: 2px solid var(--ink);
  background: rgba(255,255,255,.92);
  font-weight: 1000;
  letter-spacing: .6px;
  box-shadow: 0 2px 0 var(--ink);
  font-size: 11px;
  white-space: nowrap;
  color: var(--ink);
}

.dot{
  width: 8px; height: 8px;
  border-radius: 999px;
  border: 2px solid var(--ink);
  background: #fff;
  box-shadow: 1px 1px 0 var(--ink);
}

.title{
  margin: 8px 0 4px;
  font-weight: 950;
  font-size: 13px;
  line-height: 1.1;
  color: var(--ink);
}

.sub{
  margin: 0 0 10px;
  font-size: 12px;
  opacity: .78;
  color: var(--ink);
}

.tags{
  display:flex;
  flex-wrap:wrap;
  gap: 8px;
}

.tag{
  --accent: var(--ink);
  display:inline-flex;
  align-items:center;
  height: 22px;
  padding: 0 9px;
  border-radius: 999px;
  border: 2px solid var(--ink);
  background: rgba(255,255,255,.82);
  box-shadow: 0 2px 0 var(--ink);
  font-weight: 900;
  font-size: 10px;
  letter-spacing: .4px;
  color: var(--ink);
}

.tag::before{
  content:"";
  width: 8px; height: 8px;
  border-radius: 999px;
  border: 2px solid var(--ink);
  background: var(--accent);
  margin-right: 8px;
  box-shadow: 1px 1px 0 var(--ink);
}

/* =========================
   Responsive
   ========================= */
@media (max-width: 980px){
  .bgGrid{
    grid-template-columns: repeat(2, 1fr);
  }
}

/* 更小屏 -> 1列 + 短轨道 */
@media (max-width: 560px){
  .bgGrid{
    grid-template-columns: 1fr;
    padding: 12px;
    gap: 12px;
    max-width: 520px;
    opacity: .45;
  }

  .rail{
    border-radius: 16px;
    height: 200px;
  }

  .railInner{ inset: 8px; }
  .track{ padding: 8px; gap: 10px; }

  .mini{ padding: 9px 9px 8px; }
  .title{ font-size: 12px; }
  .sub{ font-size: 11px; }
  .cap{ height: 24px; font-size: 10px; }
  .tag{ height: 20px; font-size: 9px; }

  /* 隐藏第3/4条轨道 */
  .bgGrid > :nth-child(3),
  .bgGrid > :nth-child(4){
    display:none;
  }
}

/* ✅ Mobile: hide background rails only (keep content!) */
@media (max-width: 900px){
  .bgGrid{
    display: none !important;
  }
}
